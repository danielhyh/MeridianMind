# 经络心智 (MeridianMind) 中医智能问诊系统开发路线图

## 系统架构与开发流程图

```plain
┌───────────────────────────────────────────────────────────────────────────────┐
│                              经络心智系统架构                                  │
├───────────────────┬───────────────────────────────────┬───────────────────────┤
│                   │                                   │                       │
│   前端应用层      │          后端服务层               │      数据存储层       │
│                   │                                   │                       │
├───────────────────┼───────────────────────────────────┼───────────────────────┤
│                   │  ┌─────────────────────────────┐  │                       │
│   Uniapp			    │  │     芋道开源框架模块        │  │                       │
│   + vue3      		│  │ ┌─────────────┐ ┌─────────┐ │  │     MySQL 数据库      │
│                   │  │ │ 用户认证模块│ │系统管理 │ │  │     (基础数据)        │
│   ┌─────────────┐ │  │ └─────────────┘ └─────────┘ │  │                       │
│   │   四诊界面   │ │  │ ┌─────────────┐ ┌─────────┐ │  ├───────────────────────┤
│   └─────────────┘ │  │ │ 已有AI模块   │ │  其他   │ │  │                       │
│   ┌─────────────┐ │──┼─▶│(知识库问答) │ │ 模块    │ │  │                       │
│   │ 诊断结果展示 │ │  │ └──────┬──────┘ └─────────┘ │  │     Neo4j 图数据库    │
│   └─────────────┘ │  │         │      ┌─────────────┤  │     (中医知识图谱)    │
│   ┌─────────────┐ │  │         │      │ 新增TCM模块 │  │                       │
│   │ 治疗方案推荐 │ │  │         │      │┌───────────┤  │  ┌─────────────────┐  │
│   └─────────────┘ │  │         └─────▶││问诊服务   │◀─┼──│症状-证型-方剂网络│  │
│   ┌─────────────┐ │  │                 │└───────────┤  │  └─────────────────┘  │
│   │ 健康管理    │ │  │                 │┌───────────┤  │  ┌─────────────────┐  │
│   └─────────────┘ │  │                 ││知识图谱服务│◀─┼──│经络-穴位-脏腑网络│  │
│                   │  │                 │└───────────┤  │  └─────────────────┘  │
│                   │  │                 │┌───────────┤  │                       │
│                   │  │                 ││AI推理服务 │──┼─▶   DeepSeek 模型     │
│                   │  │                 │└───────────┤  │    (qywit平台)        │
│                   │  │                 └─────────────┤  │                       │
└───────────────────┴──┴─────────────────────────────────┴───────────────────────┘
```

## 详细开发步骤与解释

### 一、基础准备与环境搭建

#### 1. Neo4j环境配置

**工作内容：**

+ 安装Neo4j数据库（社区版或企业版）
+ 创建专用于中医知识图谱的数据库实例
+ 配置Neo4j安全认证与网络访问

**技术要点：**

+ Neo4j是一种专为图数据设计的数据库，以节点(Node)、关系(Relationship)和属性(Property)为核心概念
+ 相比关系型数据库，Neo4j在处理复杂关联数据时性能更优，更适合知识图谱应用
+ 需要学习Cypher查询语言，这是Neo4j的专用查询语言，用于图数据操作

**完成标准：**

+ Neo4j服务运行稳定，可通过Neo4j Browser访问和管理
+ 已创建专用数据库实例，设置了适当的内存和存储配置
+ 已配置安全访问和用户权限

#### 2. 芋道框架熟悉与扩展准备

**工作内容：**

+ 熟悉芋道开源框架的整体架构与模块组织
+ 分析已有AI模块的实现方式和集成点
+ 准备TCM(Traditional Chinese Medicine)模块的创建

**技术要点：**

+ 芋道框架基于Spring Boot，采用多模块结构
+ 模块间通过接口和事件进行通信，保持松耦合
+ 已有AI模块可能提供了模型调用的抽象，需要理解其设计模式

**完成标准：**

+ 能够在芋道框架中创建新模块并与现有模块集成
+ 理解框架的配置管理、权限控制和数据访问模式
+ 确定TCM模块的基础结构和功能边界

### 二、知识图谱构建

#### 3. 中医知识图谱设计

**工作内容：**

+ 设计中医实体类型（症状、证型、方剂、药材、穴位等）
+ 设计实体间关系类型（如"表现为"、"治疗用"等）
+ 定义实体和关系的属性结构

**技术要点：**

+ 将中医理论体系转化为图模型需要仔细规划节点和关系
+ 实体应具有唯一标识和丰富的属性描述
+ 关系应明确定向性和语义，可能具有权重等属性

**完成标准：**

+ 完成详细的图数据模型设计文档
+ 模型包含所有关键实体类型和关系类型的定义
+ 设计经过中医专业人士的确认验证

#### 4. 知识数据准备与导入

**工作内容：**

+ 收集中医知识数据（从经典著作、现代教材和专家经验）
+ 将文本数据结构化，准备导入格式
+ 编写Neo4j数据导入脚本

**技术要点：**

+ 数据准备可能需要使用NLP技术从文本中提取结构化信息
+ Neo4j支持CSV和JSON批量导入
+ 可以使用APOC库简化复杂的导入任务

**完成标准：**

+ 准备了包含基础中医知识的结构化数据文件
+ 成功导入核心实体（至少包含常见症状、证型和方剂）
+ 构建了实体间的关系网络

### 三、后端模块开发

#### 5. TCM模块基础架构搭建

**工作内容：**

+ 创建yudao-module-medical模块
+ 搭建模块基础结构（controller、service、repository层）
+ 配置与Neo4j的连接

**技术要点：**

+ 遵循芋道框架的模块化规范
+ 使用Spring Data Neo4j进行图数据库访问
+ 考虑并发控制和事务处理

**完成标准：**

+ 模块结构符合芋道框架规范
+ 成功连接Neo4j并能执行基本查询
+ 提供基础的健康检查和配置验证

#### 6. 知识图谱服务开发

**工作内容：**

+ 开发Neo4j数据访问层（定义节点和关系的Repository）
+ 实现基础图查询服务（如根据症状查找证型）
+ 开发图数据维护和更新功能

**技术要点：**

+ 使用Spring Data Neo4j定义实体和关系映射
+ 编写复杂的Cypher查询语句处理多级关联
+ 实现高效的图遍历算法

**完成标准：**

+ 完成核心领域实体的Neo4j映射
+ 实现常用知识图谱查询接口
+ 支持基本的数据维护操作

#### 7. 问诊业务服务开发

**工作内容：**

+ 开发四诊信息采集服务
+ 实现辨证推理服务
+ 开发治疗方案生成服务

**技术要点：**

+ 设计符合中医理论的数据模型和业务流程
+ 实现基于规则和知识图谱的推理机制
+ 集成现有AI模块提供智能问诊支持

**完成标准：**

+ 完成患者基本信息管理
+ 实现四诊信息结构化存储
+ 提供初步的辨证和治疗推荐功能

#### 8. AI推理服务集成

**工作内容：**

+ 与现有AI模块集成
+ 开发DeepSeek模型调用接口
+ 实现AI分析结果与知识图谱信息融合机制

**技术要点：**

+ 设计AI提示工程模板，引导大模型进行中医分析
+ 开发结果解析器，将AI输出转换为结构化数据
+ 实现知识图谱验证和补充机制

**完成标准：**

+ 成功调用DeepSeek模型进行中医诊断
+ AI分析结果能够与知识图谱信息有效融合
+ 形成可解释的诊断推理过程

#### 9. API接口开发

**工作内容：**

+ 设计RESTful API接口
+ 实现接口权限控制
+ 开发接口文档和测试用例

**技术要点：**

+ 遵循RESTful设计规范
+ 使用芋道框架的权限控制机制
+ 集成Swagger生成API文档

**完成标准：**

+ 提供完整的API接口集合
+ 接口具有适当的权限控制
+ 文档清晰，包含使用示例

### 四、前端应用开发

#### 10. Uniapp 基础环境设置

#### 12. API集成与数据流

**工作内容：**

+ 实现前端API调用服务
+ 开发数据状态管理
+ 实现离线模式支持

**技术要点：**

+ 使用Axios进行API通信
+ 实现请求缓存和错误处理
+ 使用AsyncStorage提供离线能力

**完成标准：**

+ 完成与后端API的完整集成
+ 实现流畅的数据流和状态管理
+ 支持基本的离线操作能力

### 五、系统测试与部署

#### 13. 集成测试

**工作内容：**

+ 开发测试用例
+ 执行前后端集成测试
+ 验证AI和知识图谱的协同工作

**技术要点：**

+ 使用JUnit和Mock框架进行后端测试
+ 构建端到端测试场景

**完成标准：**

+ 关键功能具有完整测试覆盖
+ 测试报告显示高通过率
+ 修复已发现的问题

#### 14. 部署配置

**工作内容：**

+ 准备生产环境配置
+ 构建部署脚本
+ 配置监控和日志

**技术要点：**

+ 使用Docker容器化应用组件
+ 配置生产环境安全策略
+ 设置应用监控和性能指标

**完成标准：**

+ 完整的部署文档
+ 成功部署到测试环境
+ 监控和日志系统正常工作

## 核心难点与解决方案

### 1. Neo4j知识图谱设计与构建

**难点：** 将复杂的中医理论体系转化为图数据模型，既要保持理论完整性，又要便于计算机处理。

**解决方案：**

+ 采用迭代式设计，首先构建核心概念（症状、证型、方剂）的关系网络
+ 使用属性图模型的灵活性，通过丰富的节点和关系属性表达中医理论细节
+ 建立统一的编码体系和术语标准，确保数据一致性
+ 引入中医专家参与设计评审，保证模型的专业性

### 2. 中医辨证推理机制实现

**难点：** 中医辨证是一个综合分析过程，涉及多种诊断方法和经验判断，难以完全形式化。

**解决方案：**

+ 结合规则引擎和图数据查询实现基础推理
+ 利用Neo4j的路径查询功能，实现症状到证型的多路径分析
+ 集成大模型AI能力，补充处理非结构化或模糊信息
+ 实现证据权重机制，根据症状的特异性和重要性赋予不同权重
+ 提供推理过程的可视化和解释，增强系统可信度

### 3. AI与知识图谱协同工作

**难点：** 平衡大模型的灵活理解能力与知识图谱的结构化优势，形成互补。

**解决方案：**

+ 采用"AI先行，图谱验证"的工作流程
+ 设计专门的提示模板，引导AI基于中医理论进行分析
+ 使用知识图谱验证AI输出的合理性，修正可能的错误
+ 实现双向增强：AI帮助解释知识图谱未覆盖的情况，知识图谱提供AI推理的权威支撑
+ 构建反馈学习机制，不断优化AI与知识图谱的协作模式

## 实施时间线

1. **准备阶段（2周）**：环境搭建、框架熟悉、知识图谱设计
2. **知识图谱构建（3周）**：数据收集、结构化、导入Neo4j
3. **后端开发（4周）**：基础架构、知识图谱服务、问诊服务、AI集成
4. **前端开发（3周）**：基础框架、界面实现、API集成
5. **测试与优化（2周）**：功能测试、性能优化、bug修复
6. **部署上线（1周）**：环境配置、部署、监控设置

## 建议的优先实施功能

1. **基础知识图谱构建**：先实现核心中医实体和关系，为后续功能奠定基础
2. **症状到证型的推理**：这是中医诊断的关键环节，优先实现
3. **简化版四诊采集**：从问诊开始，逐步扩展到望、闻、切
4. **基础方剂推荐**：实现简单的证型到方剂的推荐功能

这种渐进式实施策略能够快速产出可用系统，然后通过迭代不断完善功能和用户体验。

